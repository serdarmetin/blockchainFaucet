ADRf 1.4 is an initial implementation of an experimental blockchain faucet, managing multiple resource types in accordance with the Dominant Resource Fairness (DRF) distribution scheme.

The original DRF algorithm calculates the shares over normalised demand vectors for each user, assuming that the normalised demand vector corresponds to a unit task. DRF iterates over the list of demand vectors and allocates one task to the least allocated user, and then reiterates with the updated allocation statuses, until at least one resource is exhausted. Users do not submit their maximum demands for each resource, but the tuple to run a unit task, and the algorithm allocates as much resources it can for running as much tasks as possible.

The present algorithm differs from DRF for calculating the maximum allocatable dominant share with Max-min Fairness (MF) distribution scheme over the dominant share demands of users, and in turn, calculating the other shares for each user by conserving their relative ratio to the dominant share. In the MF distribution step, percantage demands are used, and they are supplied against a hundred percent capacity. This is convenient, since if every user has the same resource type as the dominant share, the algorithm will reduce down to an ordinary MF distribution over that given resource type, only utilising values converted to percentages in the calculation process. Otherwise, since by definition the remaining resources are smaller in size with respect to the dominant share, their sum will never exceed hundred per cent and lead capacity excess. The users, in this setting, submit a maximum demand for each resource. In the present implementation Autonomous Max-min Fairness (AMF) has been utilised as the MF subroutine.

The resulting distribution differs from DRF at least at two points. The first is that the resources are not allocated in real time as soon as they are decided to be available for a given user, as it is in the original setting. The second is the fact that depending on the distribution of demands and rounding off errors, the present algorithm may not exhaust all available resources in a given distribution epoch; and thus, does not have the pareto efficiency property.

Both differences arise due to the difference between the temporal settings, since DRF was originally developed for the real time distribution of computational resources for resource scheduling tasks in time sharing systems, whereas the present algorithm is designed to handle the distribution of tokens for accessing generic resources, not in real time but in a token governed blockchain economy. Nevertheless, since the unexhausted resources are left to be distributed in consecutive epochs, the long time distribution may be expected to converge to the original DRF algorithm. This point may benefit from mathematical modeling and further scrutiny.

Note that although the demand structures of the two settings are different, the original setting is convertible to our setting, simply by scaling the dominant share to the maximum available resource of that type, and scaling the demands for other resource types with the same factor.

The correctness of the code and the and correspondence of the algorithm to DRF has not been cross-checked with simulation, and the gas cost performance tests has not been run on a sufficient variety of parameters yet.
